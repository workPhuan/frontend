!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("long"));else if("function"==typeof define&&define.amd)define(["long"],e);else{var s,n="object"==typeof exports?e(require("long")):e(t.long);for(s in n)("object"==typeof exports?exports:t)[s]=n[s]}}("undefined"!=typeof self?self:this,(function(t){return s={0:function(t,e,s){"use strict";function n(t){return"number"==typeof t}function i(t){return"string"==typeof t}function r(t){return"boolean"==typeof t}function o(t){return void 0===t}function a(t){return null!==t&&t instanceof Object}function u(t){return"function"==typeof t}function c(t){return t instanceof Array}s.d(e,"d",(function(){return n})),s.d(e,"f",(function(){return i})),s.d(e,"b",(function(){return r})),s.d(e,"g",(function(){return o})),s.d(e,"e",(function(){return a})),s.d(e,"c",(function(){return u})),s.d(e,"a",(function(){return c}))},1:function(e,s){e.exports=t},22:function(t,e,s){"use strict";function n(t){return t}function i(t){return t}function r(t){return t}s.r(e);var o,a="zm.scc",u="zm.sbcm",c="zm.srlm",h="zm.sbrm",m="zm.msg.sdr",f="zm.msg.rlr",l="zm.msg.rps",d="zm.msg.srm",g="zm.msg.scm",v="zm.msg.sbm",_="zm.msg.bps",b="zm.msg.slm",p="zm.sv.ps",y={code:1100001,msg:"input parm error."},O={code:1100002,msg:"network timeout."},j={code:1000002,msg:"not login"},M={code:1009001,msg:"message content is empty"},N={code:1009010,msg:"failed to send message"},I={code:1002014,msg:"room not exist"},T={code:1002099,msg:"room inner error"},q={code:1109001,msg:"frequency limited."},D={INPUT_PARAM:y,IM_CONTENT_NULL:M,IM_CONTENT_TOO_LONG:X={code:1009002,msg:"message content is too long"},ROOM_NOT_EXIST:I},C="/liveroom/send_custom_command",w=i,P={INPUT_PARAM:y,IM_CONTENT_NULL:M,IM_CONTENT_TOO_LONG:X,ROOM_NOT_EXIST:I},R="/liveroom/send_room_message",x=r,z=r,S={INPUT_PARAM:y,IM_CONTENT_NULL:M,IM_CONTENT_TOO_LONG:X,ROOM_NOT_EXIST:I},U=i,E=i,k=y,L={code:1102022,msg:"trans send frequently"},A=I,B=n,J=n,G=i,H=r,X=((M=o=o||{})[M.I=0]="I",M[M.H=10]="H",M[M.M=100]="M",M[M.L=1e3]="L",s(1)),F=s.n(X),K=s(0),Q=(Object.defineProperty(V.prototype,"_isUseNetAgent",{get:function(){return this.u.useNetAgent},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"h",{get:function(){return this.u.reporter},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"_serviceHandler",{get:function(){return this._isUseNetAgent?this._liveRoomHandler:this._service},enumerable:!1,configurable:!0}),V.prototype.loginRsp=function(t){var e=this,s=(t=t.body).ret_timestamp,n=t.bigim_time_window,i=t.dati_time_window,r=t.trans_seqs;if(null!=s&&Object(K.f)(s)&&(t=parseFloat(s),this._serverTimeOffset=0==t?0:+s-(new Date).getTime()),n&&Object(K.d)(n)&&(this._bigimTimeWindow=n),i&&Object(K.d)(i)&&(this._datiTimeWindow=i),r)for(var o=0;o<r.length;o++){var a=r[o].trans_channel,u=r[o].trans_seq_list||r[o].trans_seq_array;0<(u=(u=u.filter((function(t){var s=t.trans_type;t=t.trans_seq;return!e.transSeqMap[s]||e.transSeqMap[s].seq<t}))).map((function(t){return{trans_type:t.trans_type,trans_local_seq:t.trans_seq}}))).length&&this.fetchReliableMessage(a,u)}},V.prototype.sendReliableMessage=function(t,e,s,n){var i,r=this;this.g.info(m+" call"),this._room.isLogin()?this._isReliable?(this.g.error(m+" send too often"),n(L)):(this.transSeqMap[t]||(this.transSeqMap[t]={seq:0}),i={trans_type:t,trans_data:e,trans_local_seq:this.transSeqMap[t].seq,trans_channel:"clt"},this._isReliable=!0,this._serviceHandler.sendReliableMessage(i,(function(n){r.transSeqMap[t].seq=n.body.trans_seq,r.g.info(m+" trans "+t+" seq "+n.body.trans_seq),r._isReliable=!1,r.roomExtraInfo[t]={key:t,value:e,updateUser:{userID:r._room.userID,userName:r._room.userName},updateTime:Date.now()},s({seq:n.header.seq,errorCode:0})}),(function(t){var e=T;t.body&&t.body.err_code?(e=r._rtm.getServerError(t.body.err_code),r.g.error(d+"  "+e.msg)):e=t,r._isReliable=!1,n(e)}),this._room)):(this.g.error(m+" state error"),n&&n(j))},V.prototype.fetchReliableMessage=function(t,e){function s(t){n.handleFetchTransRsp(t,i)}var n=this,i=(t={trans_channel:t,fetch_array:e},this.h.createSpan(o.H,{key:"/sdk/login",par:this._room.roomID},{key:""},"/liveroom/get_room_extrainfo"));i.setAttributes({fetch_array:B(e)}),this._serviceHandler.fetchReliableMessage(t,s,s,this._room),this.g.info("zm.msg.frm call success")},V.prototype.handleFetchTransRsp=function(t,e){if(t.body&&0!=t.body.err_code)this.g.error(f+" trans send error "+t.body.err_code),this.u.tracer.setError(e,{code:t.body.err_code});else if(t.header&&t.body){var s=t.body.trans_list||t.body.trans_fetch_results,n=[],i=[];if(Array.isArray(s)&&0<s.length){for(var r=0;r<s.length;r++){var o,a,u=s[r];1000001109===u.err_code?this.g.warn(f+" fetch trans unknown type "+u.err_code):(o=u.trans_type,a=u.trans_seq,i.push({trans_type:o,trans_seq:a}),1000001110===u.err_code?(this.g.warn(f+" fetch trans seq is wrong "+u.err_code),this.transSeqMap[o]={seq:a}):!this.transSeqMap[o]||this.transSeqMap[o].seq<a?(this.transSeqMap[o]={seq:a},n.push(u)):this.g.warn(f+" fetch trans seq wrong"))}this.roomExtraInfo={},0<n.length&&this.onRecvReliableMessage(n)}e.setAttributes({result_array:J(i)}),e.end()}else this.g.error(f+" trans send error "+t),this.u.tracer.setError(e,O)},V.prototype.handlePushTransMsg=function(t){var e,s=t.body.trans_type,n=t.body.trans_seq;!this.transSeqMap[s]||this.transSeqMap[s].seq<n?(this.transSeqMap[s]={seq:n},this.onRecvReliableMessage([t.body],(null==(e=null==t?void 0:t.body)?void 0:e.trans_idname)===this.u.idName||(null==(e=null==t?void 0:t.body)?void 0:e.id_name)===this.u.idName)):this.g.warn(l+" trans seq wrong"),this.g.info(l+" trans "+s+" seq "+n)},V.prototype.sendRoomMsg=function(t,e,s,n,i,r){var o=this;if(!this._room.isLogin())return this.g.error(d+" state error"),r(j),!1;var a=Date.parse(new Date+"");return 0<this._sendRoomMsgTime&&this._sendRoomMsgTime+this._sendRoomMsgInterval>a?(this.g.info(d+" freq error"),r&&r(q,0,t,n),!1):(this._sendRoomMsgTime=a,a=this._serviceHandler.sendRoomMsg({msg_category:t,msg_type:1,msg_priority:1,msg_content:n},(function(t){i({seq:t.header.seq,errorCode:0,messageID:t.body.msg_id})}),(function(t){var e,s,n=T;t.header&&t.body?(s=(e=[o._rtm.getServerError(t.body.err_code),t.body.msg_id])[1],o.g.error(d+"  "+(n=e[0]).msg),r({seq:t.header.seq,errorCode:(n=n==O?N:n).code,messageID:s})):(t.code&&t.msg&&(n=t),r({seq:0,errorCode:n.code,messageID:0}))}),this._room),this.h.spanSetAttributes({key:R,par:null==(t=this._room)?void 0:t.roomID},{send_seq:x(a)}),this.g.info(d+"  call success"),!0)},V.prototype.handlePushRoomMsg=function(t){var e,s=[];this._isUseNetAgent&&(e=t.body.msg_list,t.body.msg_list.forEach((function(t){t={fromUser:{userID:t.id_name,userName:t.nick_name},message:t.msg_content,sendTime:t.send_time.toNumber(),messageID:t.msg_id.toNumber()},s.push(t)})),t.body.server_msg_id=t.body.server_msg_id.toNumber(),t.body.ret_msg_id=t.body.ret_msg_id.toNumber()),this.u.actionListener("IMRecvBroadcastMessage",this._room.roomID,s),this.u.actionListener("_recvRoomMsg",e,t.body.server_msg_id,t.body.ret_msg_id)},V.prototype.sendCustomCommand=function(t,e,s,n){var i,r=this;return this._room.isLogin()?(e={from_userid:this.u.idName,from_username:this.u.nickName,request_id:this.u.getRequestId(),custom_content:e||"",room_id:this._room.roomID},this.h.spanSetAttributes({key:C,par:null==(i=this._room)?void 0:i.roomID},{request_id:w(e.request_id)}),i={dest_id_name:t,custom_msg:JSON.stringify(e)},this._serviceHandler.sendCustomCommand(i,(function(t){s({seq:t.header.seq,errorCode:0})}),(function(t){var e,s=r._rtm.getServerError(t.body.err_code);r.g.error(g+" "+s.msg),e=2===(null==(e=t.body)?void 0:e.err_code)||1000000002===(null==(e=t.body)?void 0:e.err_code)?y:s==O?N:s,n({seq:t.header.seq,errorCode:e.code,code:e.code})}),this._room),this.g.info(g+" call success"),!0):(this.g.error(g+" state error"),n(j),!1)},V.prototype.handlePushCustomMsg=function(t){t=[(t=JSON.parse(t.body.custommsg)).from_userid,t.from_username,t.room_id,t.custom_content],this.u.actionListener("IMRecvCustomCommand",t[2],{userID:t[0],userName:t[1]},t[3])},V.prototype.sendBigRoomMessage=function(t,e,s,n,i,r){var o,a,u,c,h=this;this._room.isLogin()?(o=this._bigimTimeWindow,a=this._serverTimeOffset,u=(new Date).getTime()+a,c=this._rtm.getSeq().toString(),this._bigImCallbackMap[c]={success:i,error:r},0==o?this.sendBigRoomMessageInternal([{msg_category:t,msg_type:1,msg_content:n,bigmsg_client_id:c}],(function(t){h.handleBigImMsgRsp(t)}),(function(t){r&&r(t)})):(i=Math.floor(u/o),this._bigImLastTimeIndex<i&&0==this._bigIMmessageList.length?(this._bigImLastTimeIndex=i,this.sendBigRoomMessageInternal([{msg_category:t,msg_type:1,msg_content:n,bigmsg_client_id:c}],(function(t){h.handleBigImMsgRsp(t)}),(function(t){r&&r(t)}))):(this._bigIMmessageList.push({msg_category:t,msg_type:1,msg_content:n,bigmsg_client_id:c}),1==this._bigIMmessageList.length&&this.setBigImTimer(a,o)))):(this.g.error(v+" state error"),r&&r(j))},V.prototype.sendBigRoomMessageInternal=function(t,e,s){this._serviceHandler.sendBigRoomMessage({msgs:t},(function(t){e(t)}),(function(t){var e=T;t.header&&t.body||(t.code&&t.msg&&(e=t),s(e)),s(e)}),this._room),this.g.info(v+" sendBigRoomMessage called")},V.prototype.handleBigImMsgRsp=function(t){this._bigimTimeWindow=t.body.bigim_time_window;for(var e=t.body.msg_list||t.body.msgs,s=0;s<e.length;s++){var n,i=e[s].msg_client_id||e[s].bigmsg_client_id,r=e[s].msg_id||e[s].bigmsg_id;this._bigImCallbackMap[i]&&(null!=(n=this._bigImCallbackMap[i].success)&&n({seq:t.header.seq,errorCode:0,messageID:r}),delete this._bigImCallbackMap[i])}},V.prototype.setBigImTimer=function(t,e){var s=this;t=e-((new Date).getTime()+t)%e,e=this._rtm.generateRandumNumber(e)+t;this._bigImTimer=setTimeout((function(){s.onBigImTimer()}),e)},V.prototype.onBigImTimer=function(){for(var t=this,e=(new Date).getTime()+this._serverTimeOffset,s=(this._bigImLastTimeIndex=Math.floor(e/this._bigimTimeWindow),[]),n=[],i=0;i<this._bigIMmessageList.length&&!(20<=i);i++){var r=this._bigIMmessageList[i];s.push({msg_category:r.msg_category,msg_type:r.msg_type,msg_content:r.msg_content,bigmsg_client_id:r.bigmsg_client_id}),n.push(r.bigmsg_client_id)}20<this._bigIMmessageList.length?this._bigIMmessageList.splice(0,20):this._bigIMmessageList=[],this.sendBigRoomMessageInternal(s,(function(e){t.handleBigImMsgRsp(e)}),(function(e,s){for(var i=0;i<n.length;i++){var r=n[i],o=t._bigImCallbackMap[r];o&&(null!=o.error&&o.error(e,s),delete t._bigImCallbackMap[r])}})),this._bigImTimer&&clearTimeout(this._bigImTimer),this._bigImTimer=null,0<this._bigIMmessageList.length&&this.setBigImTimer(this._serverTimeOffset,this._bigimTimeWindow)},V.prototype.handlePushMergeMsg=function(t){for(var e=t.body.message_list||t.body.messages,s=0;s<e.length;s++)14001===e[s].sub_cmd&&this.handlePushBigRooMsg(e[s].msg_body)},V.prototype.handlePushBigRooMsg=function(t){var e;if(Object(K.f)(t))try{e=JSON.parse(t)}catch(t){return void this.g.warn(_+"parse json error")}else e=t;if(e){t=e.room_id||this._room.roomID;for(var s=[],n=e.msg_list||e.msg_data,i=0;i<n.length;i++){var r=n[i];r.id_name==this.u.idName?this.g.info(_+" self message"):s.push({idName:r.id_name,nickName:r.nick_name,messageId:r.msg_id||r.bigmsg_id,category:r.msg_category,type:r.msg_type,content:r.msg_content,time:r.send_time||F.a.isLong(r.msg_timestamp)&&r.msg_timestamp.toNumber()})}0==s.length?this.g.info(_+" no other pushData except self"):this.onRecvBigRoomMessage(s,t),this.g.info(_+"call success")}else this.g.warn(_+" cann't find message body")},V.prototype.onRecvBigRoomMessage=function(t,e){var s=[];t.forEach((function(t){t={fromUser:{userID:t.idName,userName:t.nickName},message:t.content,sendTime:t.time,messageID:t.messageId},s.push(t)})),this.u.actionListener("IMRecvBarrageMessage",e,s),this.u.actionListener("_recvBigRoomMessage",t,e)},V.prototype.resetMessageInfo=function(){this.transSeqMap={},this.realyMessageList=[],this._relayTimer&&(clearTimeout(this._relayTimer),this._relayTimer=null),this._bigImLastTimeIndex=0,this._bigIMmessageList=[],this._bigImCallbackMap={},this._bigImTimer&&(clearTimeout(this._bigImTimer),this._bigImTimer=null),this._serverTimeOffset=0,this._datiTimeWindow=0,this._bigimTimeWindow=0},V.prototype.sendRelayMessage=function(t,e,s,n){var i=this._datiTimeWindow,r=this._serverTimeOffset;0<i?(this.realyMessageList.push({type:t,data:e,success:s,error:n}),1==this.realyMessageList.length&&this.setRelayTimer(r,i)):this.sendRelayMessageInternal(t,e,s,n)},V.prototype.sendRelayMessageInternal=function(t,e,s,n){var i=this;this.g.info(b+" call"),t={relay_type:t,relay_data:e},e=this._room;this._serviceHandler.sendRelayMessage(t,(function(t){s&&s(t.header.seq,t.body.relay_result)}),(function(t){var e=T;t.header&&t.body?n&&n(i._rtm.getServerError(t.body.err_code),t.header.seq):(t.code&&t.msg&&(e=t),n&&n(e,0))}),e)},V.prototype.setRelayTimer=function(t,e){var s=this;t=(new Date).getTime()+t,t=this._rtm.generateRandumNumber(2*e-t%e);this.g.info(b+" setTimer "+t),this._relayTimer=setTimeout((function(){s.onRelayTimer()}),t)},V.prototype.onRelayTimer=function(){var t;0==this.realyMessageList.length?this.g.info(b+"  no relay data"):(t=this.realyMessageList[0],this.sendRelayMessageInternal(t.type,t.data,t.success,t.error),this._relayTimer&&clearTimeout(this._relayTimer),this._relayTimer=null,this.realyMessageList.splice(0,1),0<this.realyMessageList.length&&this.setRelayTimer(this._serverTimeOffset,this._datiTimeWindow))},V);function V(t,e,s,n,i,r,o){var a=this;this.g=t,this.u=e,this._dataReport=s,this._service=n,this._liveRoomHandler=i,this._rtm=r,this._room=o,this._sendRoomMsgTime=0,this._sendRoomMsgInterval=500,this._bigImCallbackMap={},this._bigImLastTimeIndex=0,this._bigIMmessageList=[],this._bigImTimer=null,this._relayTimer=null,this._serverTimeOffset=0,this._datiTimeWindow=0,this._bigimTimeWindow=0,this._isReliable=!1,this.transSeqMap={},this.roomExtraInfo={},this.onRecvReliableMessage=function(t,e){void 0===e&&(e=!1);var s=t.map((function(t){var e={key:t.trans_type,value:t.trans_data,updateUser:{userID:t.id_name||t.trans_idname,userName:t.nick_name||t.trans_nickname},updateTime:F.a.isLong(t.trans_send_time)?t.trans_send_time.toNumber():t.trans_send_time};return a.roomExtraInfo[t.trans_type]=e}));e?a.g.warn(l+" id name same"):(0<s.length&&a.u.actionListener("roomExtraInfoUpdate",a._room.roomID,Object.values(a.roomExtraInfo)),t.forEach((function(t){a.u.actionListener("recvReliableMessage",t.trans_type,t.trans_seq,t.trans_data)})))},this.realyMessageList=[]}function W(t,e,s,n){var i=this;return void 0===s&&(s=1),void 0===n&&(n=1),new Promise((function(r,o){var a,c=i.getMsgSpan(R,t,!0),h=(o=i.stateCenter.proxyRes(c,(function(t){c.setAttributes({msg_id:z(t.messageID)}),r(t)}),o)).interResolve;o=o.interReject;Object(K.f)(t)&&""!=t?void 0===e||""==e?(i.logger.error(u+" message is empty"),o(S.IM_CONTENT_NULL)):Object(K.f)(e)?1024<e.length?(i.logger.error(u+" message too long"),o(S.IM_CONTENT_TOO_LONG)):(a=i.getRoomModules(t),c.setAttributes({send_seq:x(),msg_content:e}),a?a.messageHandler.sendRoomMsg(s,n,t,e,(function(t){t.messageID&&c.setAttributes({msg_id:t.messageID}),h(t)}),o):o(S.ROOM_NOT_EXIST)):(i.logger.error(u+" message must be string"),o(S.INPUT_PARAM," param message error")):(i.logger.error(u+" roomid must be string and not empty"),o(S.INPUT_PARAM," param roomID error"))}))}function Y(t,e,s){var n=this;return new Promise((function(i,r){var o,u,c=n.getMsgSpan(C,t,!0);r=(i=n.stateCenter.proxyRes(c,i,r)).interResolve,i=i.interReject;Object(K.f)(t)&&""!=t?!Object(K.a)(s)||s.find((function(t){return!Object(K.f)(t)}))?(n.logger.error(a+" dstMembers must be string array"),i(P.INPUT_PARAM," param toUserList error")):Object(K.f)(e)||Object(K.e)(e)?Object(K.f)(e)&&1024<e.length?(n.logger.error(a+" command too long"),i(P.IM_CONTENT_TOO_LONG)):(o=n.getRoomModules(t),u=Object(K.f)(e)?e:JSON.stringify(e),c.setAttributes({msg_content:u}),o?o.messageHandler.sendCustomCommand(s,e,r,i):i(P.ROOM_NOT_EXIST)):(n.logger.error(a+" custom content must be a non empty string or object"),i(P.INPUT_PARAM," param command error")):(n.logger.error(a+" roomid must be string and not empty"),i(y," param roomID error"))}))}function Z(t,e,s,n){var i=this;return void 0===s&&(s=1),void 0===n&&(n=1),new Promise((function(r,o){var a=i.getMsgSpan("/liveroom/send_big_room_message",t);o=(r=i.stateCenter.proxyRes(a,r,o)).interResolve,r=r.interReject;Object(K.f)(t)&&""!=t?void 0===e||""==e?(i.logger.error(h+" message is empty"),r(D.IM_CONTENT_NULL)):Object(K.f)(e)?1024<e.length?(i.logger.error(h+" message too long"),r(D.IM_CONTENT_TOO_LONG)):(a.setAttributes({msg_content:e}),(a=i.getRoomModules(t))?a.messageHandler.sendBigRoomMessage(s,n,t,e,o,r):r(D.ROOM_NOT_EXIST)):(i.logger.error(h+" message must be string"),r(D.INPUT_PARAM," param message error")):(i.logger.error(h+" roomid must be string and not empty"),r(D.INPUT_PARAM," param roomID error"))}))}function $(t,e,s){var n=this;return new Promise((function(i,r){var o=n.getMsgSpan("/liveroom/set_room_extrainfo",t),a=(i=n.stateCenter.proxyRes(o,i,(function(t){n.stateCenter.useNetAgent&&1015===t.errorCode&&(t.errorCode=1002017),r(t)}))).interResolve;i=i.interReject;Object(K.f)(t)&&""!=t?e&&Object(K.f)(e)?128<e.length?(n.logger.error(c+" type is too long"),i({errorCode:k.code})):s&&Object(K.f)(s)?4096<s.length?(n.logger.error(c+" type is too long"),i({errorCode:k.code})):(o.setAttributes({key:U(e),value:E(s)}),(o=n.getRoomModules(t))?o.messageHandler.sendReliableMessage(e,s,a,i):i(A)):(n.logger.error(c+" data must be string"),i({errorCode:k.code})):(n.logger.error(c+" type must be string"),i({errorCode:k.code})):(n.logger.error(u+" roomid must be string and not empty"),i(S.INPUT_PARAM," param roomID error"))}))}var tt={_sendBroadcastMessage:W,sendBroadcastMessage:function(t,e){var s=this;return new Promise((function(n,i){W.call(s,t,e).then((function(t){n({errorCode:t.errorCode,messageID:t.messageID,extendedData:t.extendedData})})).catch((function(t){i(t)}))}))},_sendCustomCommand:Y,sendCustomCommand:function(t,e,s){var n=this;return new Promise((function(i,r){Y.call(n,t,e,s).then((function(t){i({errorCode:t.errorCode,extendedData:t.extendedData})})).catch((function(t){r(t)}))}))},_sendBarrageMessage:Z,sendBarrageMessage:function(t,e){var s=this;return new Promise((function(n,i){Z.call(s,t,e).then((function(t){n({errorCode:t.errorCode,messageID:t.messageID,extendedData:t.extendedData})})).catch((function(t){i(t)}))}))},_setRoomExtraInfo:$,setRoomExtraInfo:function(t,e,s){return $.call(this,t,e,s)},sendRelayMessage:function(t,e,s,n,i){(i=this.getRoomModules(i)||this.stateCenter.roomModulesList[0])?i.messageHandler.sendRelayMessage(t,e,s,n):n&&n(I,0)}},et={handlePushRoomMsg:function(t){var e=(t=this.handlePushMsg(t))[0];t=t[1];e.messageHandler.handlePushRoomMsg(t)},handlePushCustomMsg:function(t){var e=(t=this.handlePushMsg(t))[0];t=t[1];e.messageHandler.handlePushCustomMsg(t)},handlePushMergeMsg:function(t){var e=null==(e=null==t?void 0:t.header)?void 0:e.room_id;(e=this.rtm.getRoomModules(e))?e.messageHandler.handlePushMergeMsg(t):this.logger.error(p+" room no found ignore "+JSON.stringify(t))},handlePushTransMsg:function(t){var e,s=(n=this.handlePushMsg(t))[0],n=n[1],i=null==(i=null==t?void 0:t.header)?void 0:i.room_id;(i=this.rtm.getMsgSpan("/liveroom/recv_room_extrainfo",i)).setAttributes({trans_type:G(null==(e=null==t?void 0:t.body)?void 0:e.trans_type),trans_seq:H(null==(e=null==t?void 0:t.body)?void 0:e.trans_seq)}),i.end(),s.messageHandler.handlePushTransMsg(n)},handleBigImMsgRsp:function(t){var e=null==(e=null==t?void 0:t.header)?void 0:e.room_id;(e=this.rtm.getRoomModules(e))?e.messageHandler.handleBigImMsgRsp(t):this.logger.error(p+" room no found ignore "+JSON.stringify(t))},handlePushMsg:function(t){var e=null==(e=null==t?void 0:t.header)?void 0:e.room_id;if(e=this.rtm.getRoomModules(e))return[e,t];this.logger.error(p+" room no found ignore "+JSON.stringify(t))}},st={initMessageHandler:function(){this.messageHandler=new Q(this.logger,this.stateCenter,this.dataReport,this.service,this.liveRoomHandler,this.rtm,this)}};e.default={type:"message",install:function(t,e,s,n){for(var i in tt)Object.defineProperty(t.prototype,i,{value:tt[i],writable:!1});for(var i in et)Object.defineProperty(s.prototype,i,{value:et[i],writable:!1}),Object.defineProperty(n.prototype,i,{value:et[i],writable:!1});for(var i in st)Object.defineProperty(e.prototype,i,{value:st[i],writable:!1})}}}},n={},e.m=s,e.c=n,e.d=function(t,s,n){e.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,s){if(1&s&&(t=e(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var i in t)e.d(n,i,function(e){return t[e]}.bind(null,i));return n},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=22);function e(t){var i;return(n[t]||(i=n[t]={i:t,l:!1,exports:{}},s[t].call(i.exports,i,i.exports,e),i.l=!0,i)).exports}var s,n}));